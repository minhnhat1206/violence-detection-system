
# --- Spark Master ---
spark.master                       spark://spark-master:7077
spark.app.name                     ViolenceDetectionPipeline
spark.submit.deployMode             client

# --- Logging ---
spark.eventLog.enabled              true
spark.eventLog.dir                  file:///opt/bitnami/spark/events
spark.sql.streaming.checkpointLocation s3a://inference-results/checkpoint/

# --- Kafka Integration ---
spark.jars.packages                 org.apache.spark:spark-sql-kafka-0-10_2.12:3.4.2,org.apache.hadoop:hadoop-aws:3.3.4

# --- Hive Metastore (metadata service) ---
spark.sql.catalogImplementation     hive
spark.hadoop.hive.metastore.uris    thrift://hive-metastore:9083
spark.sql.warehouse.dir             s3a://inference-results/iceberg_warehouse/

# --- S3A (MinIO) Configuration ---
spark.hadoop.fs.s3a.impl            org.apache.hadoop.fs.s3a.S3AFileSystem
spark.hadoop.fs.s3a.endpoint        http://minio:9000
spark.hadoop.fs.s3a.access.key      minio
spark.hadoop.fs.s3a.secret.key      mypassword
spark.hadoop.fs.s3a.path.style.access true
spark.hadoop.fs.s3a.connection.ssl.enabled false
spark.hadoop.fs.s3a.aws.credentials.provider org.apache.hadoop.fs.s3a.SimpleAWSCredentialsProvider

# --- Parquet and Serialization ---
spark.sql.parquet.compression.codec snappy
spark.serializer                    org.apache.spark.serializer.KryoSerializer
spark.sql.shuffle.partitions        10
spark.default.parallelism           8

# --- Streaming Behavior ---
spark.sql.streaming.schemaInference true
spark.sql.streaming.forceDeleteTempCheckpointLocation true
spark.streaming.stopGracefullyOnShutdown true

# --- Network and Retry tuning ---
spark.network.timeout               800s
spark.executor.heartbeatInterval    60s
spark.rpc.message.maxSize           256
spark.sql.broadcastTimeout          3600

# --- Misc. Useful options ---
spark.hadoop.mapreduce.fileoutputcommitter.algorithm.version 2
spark.hadoop.mapreduce.fileoutputcommitter.cleanup-failures.ignored true
spark.hadoop.fs.s3a.committer.name directory
spark.hadoop.fs.s3a.committer.magic.enabled false
spark.hadoop.fs.s3a.committer.staging.conflict-mode replace
spark.hadoop.fs.s3a.fast.upload true
